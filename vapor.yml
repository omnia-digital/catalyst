id: 46693
name: Catalyst
environments:
  production:
    domain: demo.catalyst.omniadigital.io
    database: catalyst-db-prod
    storage: catalyst-prod
    scheduler: false
    runtime: docker
    memory: 1024
    cli-memory: 512
    cli-timeout: 60
    concurrency: 1
    queue-concurrency: 1
    gateway-version: 1
    build:
      - 'COMPOSER_MIRROR_PATH_REPOS=1 composer install --no-dev'
      - 'php artisan event:cache'
      - 'yarn --frozen-lockfile && yarn run prod && rm -rf node_modules'
    deploy:
      - 'php artisan migrate --force'
    queues:
      - default
      - mail
#      - mailcoach-schedule
#      - mailcoach
#      - mailcoach-feedback
      - send-mail
      - send-campaign
      - send-automation-mail
  staging:
    domain: demo-staging.catalyst.omniadigital.io
    database: catalyst-db-staging
    storage: catalyst-staging
    runtime: docker
    scheduler: false
    memory: 1024
    cli-memory: 512
    cli-timeout: 60
    concurrency: 1
    queue-concurrency: 1
    gateway-version: 2
    build:
      - 'COMPOSER_MIRROR_PATH_REPOS=1 composer install'
      - 'php artisan event:cache'
      - 'yarn --frozen-lockfile && yarn run dev && rm -rf node_modules'
    deploy:
      - 'php artisan migrate --force'
    queues:
      - default
      - mail
#      - mailcoach-schedule
#      - mailcoach
#      - mailcoach-feedback
      - send-mail
      - send-campaign
      - send-automation-mail
